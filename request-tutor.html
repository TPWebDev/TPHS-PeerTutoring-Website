<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Request a Tutor - TPHS Peer Tutoring</title>
    <link rel="stylesheet" href="css/styles.css"/>
    <script type="text/javascript"
        src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js">
    </script>
    <script defer src="js/script.js"></script>
</head>
<body>
    <header>
    </header>

    <nav>
        <ul class="main-nav">
            <li><a href="index.html">Home</a></li>
            <li><a href="roster.html">Roster</a></li>
            <li><a href="request-tutor.html">Request a Tutor</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li><a href="gallery.html">Gallery</a></li>
        </ul>
    </nav>

    <main>
        <section class="form-section">
            <h2>Request a Tutor</h2>
            <p>Complete the form below and we will match you with a suitable tutor.</p>
            <form id="tutorRequestForm">
                <label for="r-name">Name:</label>
                <input type="text" id="r-name" name="name" placeholder="Your Name" required />

                <label for="r-email">Email:</label>
                <input type="email" id="r-email" name="email" placeholder="Your Email" required />

                <label for="r-subject">Subject:</label>
                <input type="text" id="r-subject" name="subject" placeholder="Subject you need help with" required />

                <label for="r-time">Preferred Meeting Time:</label>
                <input type="text" id="r-time" name="time" placeholder="e.g., Monday after school" required />

                <button type="submit">Submit</button>
            </form>
            
            <!-- Initialize EmailJS -->
            <script type="text/javascript">
                (function() {
                    emailjs.init("11Ne7emxQjNkHYEjx"); // Replace with your EmailJS user ID
                })();
            </script>

            <!-- Submit Form to EmailJS -->
            <script type="text/javascript">
                document.getElementById("tutorRequestForm").addEventListener("submit", function(event) {
                    event.preventDefault(); // Prevent default form submission

                    console.log("Form submitted!"); // Check if the event is firing

                    // Capture form data
                    var name = document.getElementById("r-name").value;
                    var email = document.getElementById("r-email").value;
                    var subject = document.getElementById("r-subject").value;
                    var time = document.getElementById("r-time").value;

                    // Send form data using EmailJS
                    emailjs.send("service_parx5cw", "template_1j8h8t3", {
                        name: name,
                        email: email,
                        subject: subject,
                        time: time,
                    })
                    .then(function(response) {
                        console.log("SUCCESS!", response.status, response.text);
                        alert("Form submitted successfully!");
                        document.getElementById("tutorRequestForm").reset();
                    }, function(error) {
                        console.log("FAILED...", error);
                        alert("Form submission failed. Please try again.");
                    });
                });
            </script>
            <div id="requestMessage"></div>
        </section>
    </main>

    <footer>
        <p>Â© 2024 TPHS Peer Tutoring Club. All Rights Reserved.</p>
    </footer>
</body>
</html>